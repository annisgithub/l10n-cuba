<odoo>
    <record id="hr_contract_view_form_inherit" model="ir.ui.view">
        <field name="name">hr.contract.view.form.inherit</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <button name="print_contract_proforma" string="Print contract proforma"
                        type="object"
                        class="oe_highlight" invisible="contract_state == 'draft'"/>
                <button name="print_supplier_contract" string="Print supplier contract"
                        type="object"
                        class="oe_highlight" invisible="contract_state == 'draft'"/>
            </xpath>
            <xpath expr="//header/field[@name='state']" position="replace"/>
            <xpath expr="//header/field[@name='state']" position="replace">
                <field name="contract_state" groups="!hr_contract.group_hr_contract_manager" widget="statusbar"/>
                <field name="contract_state" groups="hr_contract.group_hr_contract_manager" widget="statusbar"/>
            </xpath>
            <xpath expr="//group[@name='top_info_right']/field[@name='contract_type_id'][@groups='hr_contract.group_hr_contract_manager']" position="after">
<!--                <field name="occupational_category_id"/>-->
                <field name="contract_type" readonly="contract_state != 'draft'"/>
                <field name="determined_contract_type_id"
                       invisible="contract_type != 'determinado'"
                       required="contract_type == 'determinado'"
                       groups="!hr_contract.group_hr_contract_manager"
                       readonly="contract_state != 'draft'"
                       options="{'no_open': True, 'no_create': True}"/>
                <field name="determined_contract_type_id"
                       invisible="contract_type != 'determinado'"
                       required="contract_type == 'determinado'"
                       readonly="contract_state != 'draft'"
                       groups="hr_contract.group_hr_contract_manager"/>
            </xpath>
            <xpath expr="//group[@name='top_info_right']/field[@name='contract_type_id']" position="replace">

            </xpath>
            <xpath expr="//group[@name='top_info_right']/field[@name='contract_type_id']" position="replace">

            </xpath>
            <xpath expr="//field[@name='employee_id']" position="attributes">
                <attribute name="required">1</attribute>
                <attribute name="readonly">contract_state != 'draft'</attribute>
            </xpath>
            <xpath expr="//field[@name='date_start']" position="attributes">
                <attribute name="required">1</attribute>
                <attribute name="readonly">contract_state != 'draft'</attribute>
            </xpath>
            <xpath expr="//field[@name='resource_calendar_id']" position="attributes">
                <attribute name="readonly">contract_state != 'draft'</attribute>
            </xpath>
            <xpath expr="//field[@name='structure_type_id']" position="attributes">
                <attribute name="readonly">contract_state != 'draft'</attribute>
            </xpath>
            <xpath expr="//field[@name='department_id']" position="attributes">
                <attribute name="required">1</attribute>
                <attribute name="readonly">contract_state != 'draft'</attribute>
            </xpath>
            <xpath expr="//field[@name='department_id']" position="attributes">
                <attribute name="required">1</attribute>
                <attribute name="readonly">contract_state != 'draft'</attribute>
            </xpath>
            <xpath expr="//field[@name='job_id']" position="attributes">
                <attribute name="required">1</attribute>
                <attribute name="readonly">contract_state != 'draft'</attribute>
            </xpath>
            <xpath expr="//field[@name='job_id']" position="attributes">
                <attribute name="required">1</attribute>
                <attribute name="readonly">contract_state != 'draft'</attribute>
            </xpath>
            <xpath expr="(//field[@name='job_id'])[last()]" position="after">
                <field name="occupational_category_id" required="1" readonly="1"/>
            </xpath>
            <xpath expr="//group[@name='top_info_left']/field[@name='date_start']" position="after">
                <field name="skip_compute_date_end" invisible="1"/>
                <field name="number_of_days" invisible="contract_type != 'determinado'" readonly="contract_state != 'draft'"/>
            </xpath>

            <xpath expr="//group[@name='top_info_left']/field[@name='date_end']" position="replace">
                <field name="date_end" invisible="contract_type != 'determinado' and not skip_compute_date_end"
                       required="contract_type == 'determinado'" string="Contract End Date" readonly="1"/>
            </xpath>
       </field>
    </record>
    <record id="hr_contract_view_search_inherit" model="ir.ui.view">
        <field name="name">hr.contract.view.search.inherit</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_contract.hr_contract_view_search"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='group_by_state']" position="replace">
               <filter string="Status" name="group_by_state" domain="[]" context="{'group_by': 'contract_state'}"/>
            </xpath>
       </field>
    </record>
    <record id="hr_contract_view_kanban_inherited" model="ir.ui.view">
        <field name="name">hr.contract.kanban.inherited</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_contract.hr_contract_view_kanban"/>
        <field name="arch" type="xml">
            <xpath expr="//kanban" position="attributes">
            <attribute name="class">o_hr_contract_kanban</attribute>
            <attribute name="js_class">o_hr_contract_kanban</attribute>
            <attribute name="sample">1</attribute>
            <attribute name="create">false</attribute>
            <attribute name="group_create">false</attribute>
            <attribute name="group_edit">false</attribute>
            <attribute name="group_delete">false</attribute>
            <attribute name="records_draggable">false</attribute>
        </xpath>
            <xpath expr="//div[hasclass('oe_kanban_card')]" position="replace">
            <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_hr_kanban_record">
                <t t-if="record.employee_id.raw_value">
                    <field name="employee_id" widget="many2one_avatar_employee" class="o_kanban_image_fill_left"/>
                </t>
                <div t-else="" class="o_kanban_image_fill_left d-flex align-items-center justify-content-center bg-100 bg-gradient">
                    <svg class="w-75 h-75 opacity-50" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <g fill="currentColor">
                            <path d="M 10 11 C 4.08 11 2 14 2 16 L 2 19 L 18 19 L 18 16 C 18 14 15.92 11 10 11 Z"/>
                            <circle cx="10" cy="5.5" r="4.5"/>
                        </g>
                    </svg>
                </div>
                <div class="oe_kanban_details">
                    <div class="o_kanban_record_top">
                        <div class="o_kanban_record_headings">
                            <strong class="o_kanban_record_title">
                                <field name="name"/>
                                <div class="float-end">
                                    <field name="contract_state" widget="label_selection" options="{'classes': {'draft': 'default', 'open': 'success', 'close': 'danger'}}"/>
                                </div>
                            </strong>
                            <span class="o_kanban_record_subtitle">
                                <field name="employee_id"/>
                            </span>
                        </div>
                    </div>
                    <ul>
                        <li>
                            <i class="fa fa-fw me-2 fa-calendar text-primary" title="Start Date"/>
                            <field name="date_start"/>
                        </li>
                        <li t-if="record.date_end.raw_value">
                            <i class="fa fa-fw me-2 fa-calendar-times text-primary" title="End Date"/>
                            <field name="date_end"/>
                        </li>
                        <li>
                            <i class="fa fa-fw me-2 fa-briefcase text-primary" title="Job Position"/>
                            <field name="job_id"/>
                        </li>
                    </ul>
                </div>
                <div class="oe_kanban_content o_hr_contract_kanban_bottom position-absolute bottom-0 start-0 end-0">
                    <div class="o_kanban_record_bottom mt-3">
                        <div class="oe_kanban_bottom_left"/>
                        <div class="oe_kanban_bottom_right">
                            <field name="activity_ids" widget="kanban_activity"/>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
        </field>
    </record>

    <record id="hr_contract_view_list_inherit" model="ir.ui.view">
        <field name="name">hr.contract.view.list.inherit</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_contract.hr_contract_view_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="replace">
                <field name="contract_state" widget="badge" decoration-info="contract_state == 'draft'" decoration-warning="contract_state == 'close'" decoration-success="contract_state == 'open'"/>
            </xpath>
            <xpath expr="//field[@name='name']" position="after">
               <field name="contract_type"/>
            </xpath>
       </field>
    </record>
</odoo>
